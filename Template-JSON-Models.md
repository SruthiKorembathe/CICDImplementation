> [!TIP]
> When you inspect the GitHub Markdown for this template, you'll spot `
> ```javascript ` code fences.
> Technically the code blocks are JSON in the API, however Javascript supports
> inline comments for documentation so is a better choice for documentation.

You will see JSON for Pizza in various contexts:

| JSON type | Context | Side effects | Impacts PSA dashboard |
|-----------|---------|--------------|-----------------------|
| [Pie](#pies) | Responses to calls for that alter toppings | All changes to pie context publish pie JSON to your messaging system.<br>Updates the `PIES` table in a reporting database, and your UI views update | Yes |
| [Toppings](#toppings)<br>Each payload is for a specific topping type<br>(Or for DELETE is simply the URL) | Integrations post to Pizza API REST endpoint to change a specific topping. Pizza UI uses the same REST calls | All changes to pie context publish pie JSON to your messaging system.<br>Updates the affected "topping" tables in your reporting database (Onion, etc), and views update | Yes |

> [!NOTE]
> This table is an upfront way of setting expectations for your API consumers,
> and helps them jump to information quickly.

* [Toppings](#toppings) &mdash; Integrations post these to the Pizza API to
   change toppings. These are published back through your messaging system,
   and seen by all integrations and your reporting database
    - [Onion](#onions)

> [!NOTE]
> Here you break out the same information into shorter parts, again to ease
> understanding and to provide quick internal links.

## Published JSON

When sending JSON responses to API calls, or publishing to your messaging
system, the data payload should be wrapped JSON:

```javascript
{
    "apiVersion": "v1",
    "effectiveTime": "1970-01-01T00:00:00.000000Z", // "now"
    "data": { } // or [ ] depending on payload
}
```

> [!NOTE]
> See (Template-REST-API#response-shapes) for more details.

## Pies

In this template I omit the section on pie JSON as the REST API template
focuses on the topping endpoints, and not the pie endpoints.
Every change to toppings returns pie JSON to show the full context.

## Toppings

### Onions

| Purpose | Endpoints | Client |
|---------|-----------|--------|
| Express an Onion topping | Subpart of pie JSON | All integrations |
| | [Create](Template-REST-API#add-one-topping)/[edit](Template-REST-API#edit-one-topping)/[delete](Template-REST-API#delete-one-topping) one Onion topping | Pizza UI |

```javascript
{ 
    "startTime": "1970-01-01T00:00:00.000000Z",
    "pizzaId": "UUID", // Generated by Pizza
    "toppingId": "UUID", // Generated by Pizza
    "type": "ONION", // Always ONION for this topping
    "color": "<GREEN, RED, or WHITE>",
    "style": "<FRESH or GRILLED>",
    "comments": "free text, else null"
}
```
